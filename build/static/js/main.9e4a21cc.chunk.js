(this.webpackJsonpdropbox=this.webpackJsonpdropbox||[]).push([[0],{148:function(e,t,n){e.exports=n(278)},158:function(e,t){},160:function(e,t){},174:function(e,t){},176:function(e,t){},204:function(e,t){},206:function(e,t){},207:function(e,t){},21:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return l})),e.fetch=n(153);var a=n(277),l={get_user_data:function(e,t){return fetch("".concat(o,"/user_data?username=").concat(e,"&all=").concat(t),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))},upload_file:function(e,t,n){var a=new FormData;return a.append("file",e),a.append("first_name",t),a.append("last_name",t),a.append("desc",n),a.append("email",t),console.log("inside upload_file ",a," ",e," ",t," ",n),fetch("https://drop.chinmayisunku.ml/upload",{method:"POST",body:a}).then((function(e){return e}))},delete_file:function(e,t){console.log("in delete_files");var n=new FormData;return n.append("id",t),n.append("file",e),fetch("https://drop.chinmayisunku.ml/delete_files",{method:"DELETE",body:n}).then((function(e){return e.text()})).then((function(e){return console.log("in delete proting:",e)}))},get_user:function(){var e=new a.CognitoUserPool({UserPoolId:"us-east-2_0064KOcCQ",ClientId:"2ub6k6peilk5te5prhkq2cjm5k"}).getCurrentUser();console.log(e),null!=e&&e.getSession((function(t,n){t?alert(t.message||JSON.stringify(t)):e.getUserAttributes((function(e,n){t?console.log(t):console.log(n)}))}))}},o="https://drop.chinmayisunku.ml"}).call(this,n(5))},212:function(e,t){},214:function(e,t){},220:function(e,t){},222:function(e,t){},241:function(e,t){},253:function(e,t){},256:function(e,t){},278:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),o=n(142),i=n.n(o),s=n(29),r=n(30),c=n(32),u=n(31),d=(n(47),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(r.a)(n,[{key:"render",value:function(){return l.a.createElement("center",null,l.a.createElement("div",null,l.a.createElement("h1",null,"CHINMAYI'S MINI DROPBOX"),l.a.createElement("a",{href:"https://chinmayisunku.auth.us-east-2.amazoncognito.com/login?response_type=token&client_id=2ub6k6peilk5te5prhkq2cjm5k&redirect_uri=https://drop.chinmayisunku.ml/"},l.a.createElement("button",{class:"login_button"}," GETIN "))))}}]),n}(a.PureComponent)),m=n(20),p=n(143),f=n(21),h=(n(80),function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={description:"",files:[],result:""},a.uploadFile=a.uploadFile.bind(Object(m.a)(a)),a}return Object(r.a)(n,[{key:"uploadFile",value:function(){var e=this,t=this.props.user,n=this.state.files;n.length>0&&f.a.upload_file(n[0],t,this.state.description).then((function(n){e.setState({result:"File Uploaded successfully"}),setTimeout((function(){e.props.isAdmin?e.props.refreshList():e.props.refreshList2(t)}),250)})).catch((function(t){console.log(t),e.props.refreshList()}))}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("p",null," File Upload Result: ",this.state.result," "),l.a.createElement("input",{class:"other_buttons",type:"file",onChange:function(t){return e.setState({files:t.target.files})}}),"\xa0 \xa0",l.a.createElement("a",null,l.a.createElement("input",{value:this.state.desc,onChange:function(t){return e.setState({description:t.target.value})},placeholder:"Description",type:"text",name:"Description"}),"\xa0 \xa0",l.a.createElement("button",{class:"other_buttons",onClick:this.uploadFile},"Upload")))}}]),n}(a.PureComponent)),_=n(145);var b=function(e){var t=Object(a.useState)(!1),n=Object(_.a)(t,2),o=(n[0],n[1]);return l.a.createElement("div",{class:"topright"},l.a.createElement("a",{href:"https://drop.chinmayisunku.ml/"},l.a.createElement("button",{class:"other_buttons",onClick:function(){sessionStorage.clear(),o(!0)}},"LogOut")))},g=n(80),E=function(e){Object(c.a)(n,e);var t=Object(u.a)(n);function n(e){var a;Object(s.a)(this,n),a=t.call(this,e);sessionStorage.getItem("token");return a.state={admin:!1,disp_user:[],user_data:void 0,description:""},a.set_description=a.set_description.bind(Object(m.a)(a)),a.user_table=a.user_table.bind(Object(m.a)(a)),a}return Object(r.a)(n,[{key:"set_description",value:function(e){this.setState({description:e})}},{key:"admin_table",value:function(e,t){var n=this;console.log("inside admin module");f.a.get_user_data(e,!0).then((function(e){console.log(e),Array.isArray(e)&&n.setState({disp_user:e})})).catch((function(e){console.log(e)}))}},{key:"user_table",value:function(e){var t=this;console.log("inside user table mtd"),f.a.get_user_data(e,!1).then((function(e){console.log(e),Array.isArray(e)&&t.setState({disp_user:e})})).catch((function(e){console.log(e)})),console.log("after usertable fetch",this.state.disp_user)}},{key:"componentDidMount",value:function(){var e=this,t=sessionStorage.getItem("token");console.log("token: ",t);g.decode(t);var n=g.decode(t,{complete:!0}).payload;console.log(n),this.setState({user_data:n}),console.log("outside timeout ",this.state.user_data),setTimeout((function(){"2712aabbccdd@gmail.com"==e.state.user_data.email?e.state.admin=!0:e.state.admin=!1,e.state.admin?(console.log("in admin",e.state.admin),e.admin_table(e.state.user_data.email,!0)):(console.log("inside user",e.state.admin),e.user_table(e.state.user_data.email,!1))}),500),f.a.get_user()}},{key:"onClickDownLoad",value:function(e){window.open("https://dfbiaa0nywvvp.cloudfront.net/"+e),Object(p.saveAs)("https://dfbiaa0nywvvp.cloudfront.net/"+e,e)}},{key:"onClickDelete",value:function(e,t){var n=this;console.log("in onclick delete mtd"),f.a.delete_file(e,t).then((function(e){console.log("from inside the delete fetch",e),setTimeout((function(){n.state.admin?n.admin_table(n.state.user_data.email,!0):n.user_table(n.state.user_data.email,!1)}),500)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,t=this.state.admin;return l.a.createElement("center",null,l.a.createElement("div",null,l.a.createElement("p",null," User: ",this.state.user_data&&l.a.createElement("a",{href:"#login"},this.state.user_data.email),"\xa0\xa0 User Type:  ",t&&l.a.createElement("a",null,' "ADMIN" '),!t&&l.a.createElement("a",null,' "Non Admin"'),this.state.user_data&&l.a.createElement(b,{class:"topright"}),!this.state.user_data&&l.a.createElement(d,null)),this.state.user_data&&l.a.createElement(h,{user:this.state.user_data.email,description:this.state.description,refreshList:function(t){return e.admin_table(e.state.user_data.email,e.state.admin)},refreshList2:function(t){return e.user_table(e.state.user_data.email,e.state.admin)},admin:t}),"\xa0 \xa0",l.a.createElement("div",null,l.a.createElement("table",null,l.a.createElement("tr",{key:0},t&&l.a.createElement("th",null,"User"),l.a.createElement("th",null,"File Name"),l.a.createElement("th",null,"Description"),l.a.createElement("th",null,"File Upload Time"),l.a.createElement("th",null,"File Updated Time"),!t&&l.a.createElement("th",null,"Download"),l.a.createElement("th",null,"Delete")),this.state.disp_user.map((function(n){return l.a.createElement("tr",{key:n.id},t&&l.a.createElement("td",null,n.userName),l.a.createElement("td",null,n.fileName),l.a.createElement("td",null,n.description),l.a.createElement("td",null,n.fileCreatedTime),l.a.createElement("td",null,n.fileUpdatedTime),!t&&l.a.createElement("td",null,l.a.createElement("a",{href:"https://dfbiaa0nywvvp.cloudfront.net/"+n.fileName,target:"_blank",download:n.fileName},l.a.createElement("button",{class:"download_button",onClick:function(t){return e.onClickDownLoad(n.fileName)}},"DownLoad"))),l.a.createElement("td",null,l.a.createElement("button",{class:"delete_button",onClick:function(t){return e.onClickDelete(n.fileName,n.id)}},"Delete")))}))))))}}]),n}(a.PureComponent);var v=function(e){if(e.location&&e.location.hash){var t=e.location.hash.split("&");if(t.length>0){var n=t[0].replace("#id_token=","").replace("#access_token=","");sessionStorage.setItem("token",n)}}var o=sessionStorage.getItem("token"),i=void 0!=o&&o.length>0;return l.a.createElement(a.Fragment,null,i&&l.a.createElement(E,null),!i&&l.a.createElement(d,null))},k=n(279),y=n(12),O=Object(y.a)(),j=l.a.createElement(k.b,{history:O},l.a.createElement("div",null,l.a.createElement(k.c,null,l.a.createElement(k.a,{path:"/",component:v}),l.a.createElement(k.a,{path:"/login",component:d}),l.a.createElement(k.a,{path:"/userpage",component:E}))));i.a.render(j,document.getElementById("root"))},47:function(e,t,n){}},[[148,1,2]]]);
//# sourceMappingURL=main.9e4a21cc.chunk.js.map