{"ast":null,"code":"var _jsxFileName = \"/Users/sunku/Downloads/DropBucket-CMPE281-master/src/components/Accounts.js\";\nimport React, { createContext } from \"react\";\nimport { CognitoUser, AuthenticationDetails } from \"amazon-cognito-identity-js\";\nimport Pool from \"../UserPool\";\nconst AccountContext = createContext();\nconst Account = props => {\n  const getSession = async () => await new Promise((resolve, reject) => {\n    const user = Pool.getCurrentUser();\n    if (user) {\n      user.getSession(async (err, session) => {\n        if (err) {\n          reject();\n        } else {\n          const attributes = await new Promise((resolve, reject) => {\n            user.getUserAttributes((err, attributes) => {\n              if (err) {\n                reject(err);\n              } else {\n                const results = {};\n                for (let attribute of attributes) {\n                  const {\n                    Name,\n                    Value\n                  } = attribute;\n                  results[Name] = Value;\n                }\n                resolve(results);\n              }\n            });\n          });\n          resolve({\n            user,\n            ...session,\n            ...attributes\n          });\n        }\n      });\n    } else {\n      reject();\n    }\n  });\n  const authenticate = async (Username, Password) => await new Promise((resolve, reject) => {\n    const user = new CognitoUser({\n      Username,\n      Pool\n    });\n    const authDetails = new AuthenticationDetails({\n      Username,\n      Password\n    });\n    user.authenticateUser(authDetails, {\n      onSuccess: data => {\n        console.log(\"onSuccess:\", data);\n        resolve(data);\n      },\n      onFailure: err => {\n        console.error(\"onFailure:\", err);\n        reject(err);\n      },\n      newPasswordRequired: data => {\n        console.log(\"newPasswordRequired:\", data);\n        resolve(data);\n      }\n    });\n  });\n  const logout = () => {\n    const user = Pool.getCurrentUser();\n    if (user) {\n      user.signOut();\n    }\n  };\n  return /*#__PURE__*/React.createElement(AccountContext.Provider, {\n    value: {\n      authenticate,\n      getSession,\n      logout\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, props.children);\n};\nexport { Account, AccountContext };","map":{"version":3,"names":["React","createContext","CognitoUser","AuthenticationDetails","Pool","AccountContext","Account","props","getSession","Promise","resolve","reject","user","getCurrentUser","err","session","attributes","getUserAttributes","results","attribute","Name","Value","authenticate","Username","Password","authDetails","authenticateUser","onSuccess","data","console","log","onFailure","error","newPasswordRequired","logout","signOut","children"],"sources":["/Users/sunku/Downloads/DropBucket-CMPE281-master/src/components/Accounts.js"],"sourcesContent":["import React, { createContext } from \"react\";\nimport { CognitoUser, AuthenticationDetails } from \"amazon-cognito-identity-js\";\nimport Pool from \"../UserPool\";\n\nconst AccountContext = createContext();\n\nconst Account = props => {\n  const getSession = async () =>\n    await new Promise((resolve, reject) => {\n      const user = Pool.getCurrentUser();\n      if (user) {\n        user.getSession(async (err, session) => {\n          if (err) {\n            reject();\n          } else {\n            const attributes = await new Promise((resolve, reject) => {\n              user.getUserAttributes((err, attributes) => {\n                if (err) {\n                  reject(err);\n                } else {\n                  const results = {};\n\n                  for (let attribute of attributes) {\n                    const { Name, Value } = attribute;\n                    results[Name] = Value;\n                  }\n\n                  resolve(results);\n                }\n              });\n            });\n\n            resolve({\n              user,\n              ...session,\n              ...attributes\n            });\n          }\n        });\n      } else {\n        reject();\n      }\n    });\n\n  const authenticate = async (Username, Password) =>\n    await new Promise((resolve, reject) => {\n      const user = new CognitoUser({ Username, Pool });\n      const authDetails = new AuthenticationDetails({ Username, Password });\n\n      user.authenticateUser(authDetails, {\n        onSuccess: data => {\n          console.log(\"onSuccess:\", data);\n          resolve(data);\n        },\n\n        onFailure: err => {\n          console.error(\"onFailure:\", err);\n          reject(err);\n        },\n\n        newPasswordRequired: data => {\n          console.log(\"newPasswordRequired:\", data);\n          resolve(data);\n        }\n      });\n    });\n\n  const logout = () => {\n    const user = Pool.getCurrentUser();\n    if (user) {\n      user.signOut();\n    }\n  };\n\n  return (\n    <AccountContext.Provider\n      value={{\n        authenticate,\n        getSession,\n        logout\n      }}\n    >\n      {props.children}\n    </AccountContext.Provider>\n  );\n};\n\nexport { Account, AccountContext };"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,aAAa,QAAQ,OAAO;AAC5C,SAASC,WAAW,EAAEC,qBAAqB,QAAQ,4BAA4B;AAC/E,OAAOC,IAAI,MAAM,aAAa;AAE9B,MAAMC,cAAc,GAAGJ,aAAa,EAAE;AAEtC,MAAMK,OAAO,GAAGC,KAAK,IAAI;EACvB,MAAMC,UAAU,GAAG,YACjB,MAAM,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACrC,MAAMC,IAAI,GAAGR,IAAI,CAACS,cAAc,EAAE;IAClC,IAAID,IAAI,EAAE;MACRA,IAAI,CAACJ,UAAU,CAAC,OAAOM,GAAG,EAAEC,OAAO,KAAK;QACtC,IAAID,GAAG,EAAE;UACPH,MAAM,EAAE;QACV,CAAC,MAAM;UACL,MAAMK,UAAU,GAAG,MAAM,IAAIP,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;YACxDC,IAAI,CAACK,iBAAiB,CAAC,CAACH,GAAG,EAAEE,UAAU,KAAK;cAC1C,IAAIF,GAAG,EAAE;gBACPH,MAAM,CAACG,GAAG,CAAC;cACb,CAAC,MAAM;gBACL,MAAMI,OAAO,GAAG,CAAC,CAAC;gBAElB,KAAK,IAAIC,SAAS,IAAIH,UAAU,EAAE;kBAChC,MAAM;oBAAEI,IAAI;oBAAEC;kBAAM,CAAC,GAAGF,SAAS;kBACjCD,OAAO,CAACE,IAAI,CAAC,GAAGC,KAAK;gBACvB;gBAEAX,OAAO,CAACQ,OAAO,CAAC;cAClB;YACF,CAAC,CAAC;UACJ,CAAC,CAAC;UAEFR,OAAO,CAAC;YACNE,IAAI;YACJ,GAAGG,OAAO;YACV,GAAGC;UACL,CAAC,CAAC;QACJ;MACF,CAAC,CAAC;IACJ,CAAC,MAAM;MACLL,MAAM,EAAE;IACV;EACF,CAAC,CAAC;EAEJ,MAAMW,YAAY,GAAG,OAAOC,QAAQ,EAAEC,QAAQ,KAC5C,MAAM,IAAIf,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACrC,MAAMC,IAAI,GAAG,IAAIV,WAAW,CAAC;MAAEqB,QAAQ;MAAEnB;IAAK,CAAC,CAAC;IAChD,MAAMqB,WAAW,GAAG,IAAItB,qBAAqB,CAAC;MAAEoB,QAAQ;MAAEC;IAAS,CAAC,CAAC;IAErEZ,IAAI,CAACc,gBAAgB,CAACD,WAAW,EAAE;MACjCE,SAAS,EAAEC,IAAI,IAAI;QACjBC,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEF,IAAI,CAAC;QAC/BlB,OAAO,CAACkB,IAAI,CAAC;MACf,CAAC;MAEDG,SAAS,EAAEjB,GAAG,IAAI;QAChBe,OAAO,CAACG,KAAK,CAAC,YAAY,EAAElB,GAAG,CAAC;QAChCH,MAAM,CAACG,GAAG,CAAC;MACb,CAAC;MAEDmB,mBAAmB,EAAEL,IAAI,IAAI;QAC3BC,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEF,IAAI,CAAC;QACzClB,OAAO,CAACkB,IAAI,CAAC;MACf;IACF,CAAC,CAAC;EACJ,CAAC,CAAC;EAEJ,MAAMM,MAAM,GAAG,MAAM;IACnB,MAAMtB,IAAI,GAAGR,IAAI,CAACS,cAAc,EAAE;IAClC,IAAID,IAAI,EAAE;MACRA,IAAI,CAACuB,OAAO,EAAE;IAChB;EACF,CAAC;EAED,oBACE,oBAAC,cAAc,CAAC,QAAQ;IACtB,KAAK,EAAE;MACLb,YAAY;MACZd,UAAU;MACV0B;IACF,CAAE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAED3B,KAAK,CAAC6B,QAAQ,CACS;AAE9B,CAAC;AAED,SAAS9B,OAAO,EAAED,cAAc"},"metadata":{},"sourceType":"module"}