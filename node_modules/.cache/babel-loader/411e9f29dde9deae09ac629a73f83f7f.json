{"ast":null,"code":"global.fetch = require('node-fetch');\nvar AmazonCognitoIdentity = require('amazon-cognito-identity-js');\nexport const dataService = {\n  get_user_data,\n  upload_file,\n  delete_file,\n  get_user\n};\nexport const apiConfig = {\n  endpointURL: \"http://127.0.0.1:8080\"\n};\nfunction get_user_data(userName, all) {\n  console.log(\"user\" + userName);\n  console.log(\"all or none \" + all);\n  const requestOption = {\n    method: 'GET',\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  };\n  return fetch(`/user_data/${userName}/${all}`, requestOption).then(res => {\n    return res.json();\n  });\n}\nfunction upload_file(inputFile, userData, description) {\n  const formData = new FormData();\n  formData.append('file', inputFile);\n  formData.append('first_name', userData);\n  formData.append('last_name', userData);\n  formData.append('desc', description);\n  formData.append('email', userData);\n  console.log(\"type : \", inputFile.type);\n  console.log(`UserNAme: ${userData}, desc: ${description}`);\n  const requestOption = {\n    method: 'POST',\n    body: formData\n  };\n  return fetch(`/upload`, requestOption).then(res => {\n    return res;\n  });\n}\nfunction delete_file(fileName, id) {\n  return fetch(`/delete_files/${id}/${fileName}`, {\n    method: 'DELETE'\n  });\n}\nfunction get_user() {\n  var poolData = {\n    UserPoolId: 'us-east-2_0064KOcCQ',\n    ClientId: '2ub6k6peilk5te5prhkq2cjm5k'\n  };\n  var userPool = new AmazonCognitoIdentity.CognitoUserPool(poolData);\n  var cognitoUser = userPool.getCurrentUser();\n  console.log(\"cognito user\", cognitoUser, \" \", userPool);\n  if (cognitoUser != null) {\n    cognitoUser.getSession(function (err, session) {\n      if (err) {\n        alert(err.message || JSON.stringify(err));\n        return;\n      }\n      console.log('session validity: ' + session.isValid());\n\n      // NOTE: getSession must be called to authenticate user before calling getUserAttributes\n      cognitoUser.getUserAttributes(function (err, attributes) {\n        if (err) {\n          // Handle error\n          console.log(err);\n        } else {\n          // Do something with attributes\n          console.log(attributes);\n        }\n      });\n    });\n  }\n}","map":{"version":3,"names":["global","fetch","require","AmazonCognitoIdentity","dataService","get_user_data","upload_file","delete_file","get_user","apiConfig","endpointURL","userName","all","console","log","requestOption","method","headers","then","res","json","inputFile","userData","description","formData","FormData","append","type","body","fileName","id","poolData","UserPoolId","ClientId","userPool","CognitoUserPool","cognitoUser","getCurrentUser","getSession","err","session","alert","message","JSON","stringify","isValid","getUserAttributes","attributes"],"sources":["/Users/sunku/Downloads/DropBucket-CMPE281-master/src/services/dataService.js"],"sourcesContent":["global.fetch = require('node-fetch');\nvar AmazonCognitoIdentity = require('amazon-cognito-identity-js');\n\nexport const dataService = {\n    get_user_data,\n    upload_file,\n    delete_file,\n    get_user\n}\n\nexport const apiConfig = {\n    endpointURL: \"http://127.0.0.1:8080\"\n}\n\nfunction get_user_data(userName,all) {\n    console.log(\"user\"+userName);\n    console.log(\"all or none \"+all);\n    const requestOption = {\n        method: 'GET',\n        headers: { \"Content-Type\": \"application/json\" },\n    }\n    return fetch(`/user_data/${userName}/${all}`, requestOption).then(res => {\n        return res.json();\n    })\n}\n\nfunction upload_file(inputFile, userData, description) {\n    const formData = new FormData();\n    formData.append('file', inputFile);\n    formData.append('first_name', userData);\n    formData.append('last_name', userData);\n    formData.append('desc', description);\n    formData.append('email', userData);\n    console.log(\"type : \",inputFile.type);\n    console.log(`UserNAme: ${userData}, desc: ${description}`);\n    const requestOption = {\n        method: 'POST',\n        body: formData\n    }\n    return fetch(`/upload`, requestOption).then(res => {\n        return res;\n    })\n}\nfunction delete_file(fileName,id) {\n    return fetch(`/delete_files/${id}/${fileName}`, { method: 'DELETE' })\n}\n\nfunction get_user() {\n    var poolData = {\n        UserPoolId: 'us-east-2_0064KOcCQ',\n        ClientId: '2ub6k6peilk5te5prhkq2cjm5k',\n    };\n    var userPool = new AmazonCognitoIdentity.CognitoUserPool(poolData);\n    var cognitoUser = userPool.getCurrentUser();\n\n    console.log(\"cognito user\", cognitoUser,\" \",userPool);\n\n    if (cognitoUser != null) {\n        cognitoUser.getSession(function(err, session) {\n            if (err) {\n                alert(err.message || JSON.stringify(err));\n                return;\n            }\n            console.log('session validity: ' + session.isValid());\n    \n            // NOTE: getSession must be called to authenticate user before calling getUserAttributes\n            cognitoUser.getUserAttributes(function(err, attributes) {\n                if (err) {\n                    // Handle error\n                    console.log(err);\n                } else {\n                    // Do something with attributes\n                    console.log(attributes);\n                }\n            });\n        });\n    }\n}\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}