{"ast":null,"code":"import { useEscapeKeydown as e } from \"@radix-ui/react-use-escape-keydown\";\nimport { useCallbackRef as t } from \"@radix-ui/react-use-callback-ref\";\nimport { useBodyPointerEvents as n } from \"@radix-ui/react-use-body-pointer-events\";\nimport { useComposedRefs as r } from \"@radix-ui/react-compose-refs\";\nimport { Primitive as s } from \"@radix-ui/react-primitive\";\nimport { composeEventHandlers as o } from \"@radix-ui/primitive\";\nimport * as i from \"react\";\nimport a from \"@babel/runtime/helpers/esm/extends\";\nconst u = /*#__PURE__*/i.createContext({\n  layers: new Set(),\n  layersWithOutsidePointerEventsDisabled: new Set(),\n  branches: new Set()\n});\nexport const DismissableLayer = /*#__PURE__*/i.forwardRef((l, m) => {\n  const {\n      disableOutsidePointerEvents: f = !1,\n      onEscapeKeyDown: p,\n      onPointerDownOutside: v,\n      onFocusOutside: b,\n      onInteractOutside: E,\n      onDismiss: y,\n      ...w\n    } = l,\n    h = i.useContext(u),\n    [D, x] = i.useState(null),\n    [, C] = i.useState({}),\n    L = r(m, e => x(e)),\n    P = Array.from(h.layers),\n    [O] = [...h.layersWithOutsidePointerEventsDisabled].slice(-1),\n    g = P.indexOf(O),\n    B = D ? P.indexOf(D) : -1,\n    R = h.layersWithOutsidePointerEventsDisabled.size > 0,\n    F = B >= g,\n    S = function (e) {\n      const n = t(e),\n        r = i.useRef(!1);\n      return i.useEffect(() => {\n        const e = e => {\n            if (e.target && !r.current) {\n              d(\"dismissableLayer.pointerDownOutside\", n, {\n                originalEvent: e\n              });\n            }\n            r.current = !1;\n          },\n          t = window.setTimeout(() => {\n            document.addEventListener(\"pointerdown\", e);\n          }, 0);\n        return () => {\n          window.clearTimeout(t), document.removeEventListener(\"pointerdown\", e);\n        };\n      }, [n]), {\n        onPointerDownCapture: () => r.current = !0\n      };\n    }(e => {\n      const t = e.target,\n        n = [...h.branches].some(e => e.contains(t));\n      F && !n && (null == v || v(e), null == E || E(e), e.defaultPrevented || null == y || y());\n    }),\n    W = function (e) {\n      const n = t(e),\n        r = i.useRef(!1);\n      return i.useEffect(() => {\n        const e = e => {\n          if (e.target && !r.current) {\n            d(\"dismissableLayer.focusOutside\", n, {\n              originalEvent: e\n            });\n          }\n        };\n        return document.addEventListener(\"focusin\", e), () => document.removeEventListener(\"focusin\", e);\n      }, [n]), {\n        onFocusCapture: () => r.current = !0,\n        onBlurCapture: () => r.current = !1\n      };\n    }(e => {\n      const t = e.target;\n      [...h.branches].some(e => e.contains(t)) || (null == b || b(e), null == E || E(e), e.defaultPrevented || null == y || y());\n    });\n  return e(e => {\n    B === h.layers.size - 1 && (null == p || p(e), e.defaultPrevented || null == y || y());\n  }), n({\n    disabled: f\n  }), i.useEffect(() => {\n    D && (f && h.layersWithOutsidePointerEventsDisabled.add(D), h.layers.add(D), c());\n  }, [D, f, h]), i.useEffect(() => () => {\n    D && (h.layers.delete(D), h.layersWithOutsidePointerEventsDisabled.delete(D), c());\n  }, [D, h]), i.useEffect(() => {\n    const e = () => C({});\n    return document.addEventListener(\"dismissableLayer.update\", e), () => document.removeEventListener(\"dismissableLayer.update\", e);\n  }, []), /*#__PURE__*/i.createElement(s.div, a({}, w, {\n    ref: L,\n    style: {\n      pointerEvents: R ? F ? \"auto\" : \"none\" : void 0,\n      ...l.style\n    },\n    onFocusCapture: o(l.onFocusCapture, W.onFocusCapture),\n    onBlurCapture: o(l.onBlurCapture, W.onBlurCapture),\n    onPointerDownCapture: o(l.onPointerDownCapture, S.onPointerDownCapture)\n  }));\n}); /*#__PURE__*/\nexport const DismissableLayerBranch = /*#__PURE__*/i.forwardRef((e, t) => {\n  const n = i.useContext(u),\n    o = i.useRef(null),\n    c = r(t, o);\n  return i.useEffect(() => {\n    const e = o.current;\n    if (e) return n.branches.add(e), () => {\n      n.branches.delete(e);\n    };\n  }, [n.branches]), /*#__PURE__*/i.createElement(s.div, a({}, e, {\n    ref: c\n  }));\n}); /*#__PURE__*/\nfunction c() {\n  const e = new Event(\"dismissableLayer.update\");\n  document.dispatchEvent(e);\n}\nfunction d(e, t, n) {\n  const r = n.originalEvent.target,\n    s = new CustomEvent(e, {\n      bubbles: !1,\n      cancelable: !0,\n      detail: n\n    });\n  return t && r.addEventListener(e, t, {\n    once: !0\n  }), !r.dispatchEvent(s);\n}\nexport const Root = DismissableLayer;\nexport const Branch = DismissableLayerBranch;","map":null,"metadata":{},"sourceType":"module"}