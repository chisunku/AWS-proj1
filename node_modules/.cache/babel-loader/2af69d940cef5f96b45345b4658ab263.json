{"ast":null,"code":"global.fetch=require('node-fetch');var AmazonCognitoIdentity=require('amazon-cognito-identity-js');export var dataService={get_user_data:get_user_data,upload_file:upload_file,delete_file:delete_file,get_user:get_user};export var apiConfig={endpointURL:\"https://drop.chinmayisunku.ml\"};function get_user_data(user_name,all){var requestOption={method:'GET',headers:{\"Content-Type\":\"application/json\"}};return fetch(\"https://drop.chinmayisunku.ml/user_data?\"+\"user_name=\".concat(user_name,\"&all=\").concat(all),requestOption).then(function(res){return res.json();});}function upload_file(input_file,user_data,description){var formData=new FormData();formData.append('file',input_file);formData.append('first_name',user_data);formData.append('last_name',user_data);formData.append('desc',description);formData.append('email',user_data);var requestOption={method:'POST',body:formData};return fetch(\"/upload\",requestOption).then(function(res){return res;});}function delete_file(file_name,id){return fetch(\"\".concat(apiConfig.endpointURL,\"/delete_files?id=\").concat(id,\"&file=\").concat(file_name),{method:'DELETE'});}function get_user(){var pool_data={UserPoolId:'us-east-2_0064KOcCQ',ClientId:'2ub6k6peilk5te5prhkq2cjm5k'};var user_pool=new AmazonCognitoIdentity.CognitoUserPool(pool_data);var cognito_user=user_pool.getCurrentUser();if(cognito_user!=null){cognito_user.getSession(function(e,session){if(e){alert(e.message||JSON.stringify(e));return;}cognito_user.getUserAttributes(function(err,attributes){if(e){console.log(e);}else{console.log(attributes);}});});}}","map":{"version":3,"names":["global","fetch","require","AmazonCognitoIdentity","dataService","get_user_data","upload_file","delete_file","get_user","apiConfig","endpointURL","user_name","all","requestOption","method","headers","then","res","json","input_file","user_data","description","formData","FormData","append","body","file_name","id","pool_data","UserPoolId","ClientId","user_pool","CognitoUserPool","cognito_user","getCurrentUser","getSession","e","session","alert","message","JSON","stringify","getUserAttributes","err","attributes","console","log"],"sources":["/home/ec2-user/frontend-dropbox-proj1/src/services/dataService.js"],"sourcesContent":["global.fetch = require('node-fetch');\nvar AmazonCognitoIdentity = require('amazon-cognito-identity-js');\n\nexport const dataService = {\n    get_user_data,\n    upload_file,\n    delete_file,\n    get_user\n}\n\nexport const apiConfig = {\n    endpointURL: \"https://drop.chinmayisunku.ml\"\n}\n\nfunction get_user_data(user_name,all) {\n    const requestOption = {\n        method: 'GET',\n        headers: { \"Content-Type\": \"application/json\" },\n    }\n    return fetch(\"https://drop.chinmayisunku.ml/user_data?\"+`user_name=${user_name}&all=${all}`, requestOption).then(res => {\n        return res.json();\n    })\n}\n\nfunction upload_file(input_file, user_data, description) {\n    const formData = new FormData();\n    formData.append('file', input_file);\n    formData.append('first_name', user_data);\n    formData.append('last_name', user_data);\n    formData.append('desc', description);\n    formData.append('email', user_data);\n    const requestOption = {\n        method: 'POST',\n        body: formData\n    }\n    return fetch(`/upload`, requestOption).then(res => {\n        return res;\n    })\n}\nfunction delete_file(file_name,id) {\n    return fetch(`${apiConfig.endpointURL}/delete_files?id=${id}&file=${file_name}`, { method: 'DELETE' })\n}\n\nfunction get_user() {\n    var pool_data = {\n        UserPoolId: 'us-east-2_0064KOcCQ',\n        ClientId: '2ub6k6peilk5te5prhkq2cjm5k',\n    };\n    var user_pool = new AmazonCognitoIdentity.CognitoUserPool(pool_data);\n    var cognito_user = user_pool.getCurrentUser();\n\n    if (cognito_user != null) {\n        cognito_user.getSession(function(e, session) {\n            if (e) {\n                alert(e.message || JSON.stringify(e));\n                return;\n            }\n            cognito_user.getUserAttributes(function(err, attributes) {\n                if (e) {\n                    console.log(e);\n                } else {\n                    console.log(attributes);\n                }\n            });\n        });\n    }\n}\n\n"],"mappings":"AAAAA,MAAM,CAACC,KAAK,CAAGC,OAAO,CAAC,YAAY,CAAC,CACpC,GAAIC,sBAAqB,CAAGD,OAAO,CAAC,4BAA4B,CAAC,CAEjE,MAAO,IAAME,YAAW,CAAG,CACvBC,aAAa,CAAbA,aAAa,CACbC,WAAW,CAAXA,WAAW,CACXC,WAAW,CAAXA,WAAW,CACXC,QAAQ,CAARA,QACJ,CAAC,CAED,MAAO,IAAMC,UAAS,CAAG,CACrBC,WAAW,CAAE,+BACjB,CAAC,CAED,QAASL,cAAa,CAACM,SAAS,CAACC,GAAG,CAAE,CAClC,GAAMC,cAAa,CAAG,CAClBC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CAAE,cAAc,CAAE,kBAAmB,CAClD,CAAC,CACD,MAAOd,MAAK,CAAC,0CAA0C,qBAAcU,SAAS,iBAAQC,GAAG,CAAE,CAAEC,aAAa,CAAC,CAACG,IAAI,CAAC,SAAAC,GAAG,CAAI,CACpH,MAAOA,IAAG,CAACC,IAAI,EAAE,CACrB,CAAC,CAAC,CACN,CAEA,QAASZ,YAAW,CAACa,UAAU,CAAEC,SAAS,CAAEC,WAAW,CAAE,CACrD,GAAMC,SAAQ,CAAG,GAAIC,SAAQ,EAAE,CAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAEL,UAAU,CAAC,CACnCG,QAAQ,CAACE,MAAM,CAAC,YAAY,CAAEJ,SAAS,CAAC,CACxCE,QAAQ,CAACE,MAAM,CAAC,WAAW,CAAEJ,SAAS,CAAC,CACvCE,QAAQ,CAACE,MAAM,CAAC,MAAM,CAAEH,WAAW,CAAC,CACpCC,QAAQ,CAACE,MAAM,CAAC,OAAO,CAAEJ,SAAS,CAAC,CACnC,GAAMP,cAAa,CAAG,CAClBC,MAAM,CAAE,MAAM,CACdW,IAAI,CAAEH,QACV,CAAC,CACD,MAAOrB,MAAK,WAAYY,aAAa,CAAC,CAACG,IAAI,CAAC,SAAAC,GAAG,CAAI,CAC/C,MAAOA,IAAG,CACd,CAAC,CAAC,CACN,CACA,QAASV,YAAW,CAACmB,SAAS,CAACC,EAAE,CAAE,CAC/B,MAAO1B,MAAK,WAAIQ,SAAS,CAACC,WAAW,6BAAoBiB,EAAE,kBAASD,SAAS,EAAI,CAAEZ,MAAM,CAAE,QAAS,CAAC,CAAC,CAC1G,CAEA,QAASN,SAAQ,EAAG,CAChB,GAAIoB,UAAS,CAAG,CACZC,UAAU,CAAE,qBAAqB,CACjCC,QAAQ,CAAE,4BACd,CAAC,CACD,GAAIC,UAAS,CAAG,GAAI5B,sBAAqB,CAAC6B,eAAe,CAACJ,SAAS,CAAC,CACpE,GAAIK,aAAY,CAAGF,SAAS,CAACG,cAAc,EAAE,CAE7C,GAAID,YAAY,EAAI,IAAI,CAAE,CACtBA,YAAY,CAACE,UAAU,CAAC,SAASC,CAAC,CAAEC,OAAO,CAAE,CACzC,GAAID,CAAC,CAAE,CACHE,KAAK,CAACF,CAAC,CAACG,OAAO,EAAIC,IAAI,CAACC,SAAS,CAACL,CAAC,CAAC,CAAC,CACrC,OACJ,CACAH,YAAY,CAACS,iBAAiB,CAAC,SAASC,GAAG,CAAEC,UAAU,CAAE,CACrD,GAAIR,CAAC,CAAE,CACHS,OAAO,CAACC,GAAG,CAACV,CAAC,CAAC,CAClB,CAAC,IAAM,CACHS,OAAO,CAACC,GAAG,CAACF,UAAU,CAAC,CAC3B,CACJ,CAAC,CAAC,CACN,CAAC,CAAC,CACN,CACJ"},"metadata":{},"sourceType":"module"}