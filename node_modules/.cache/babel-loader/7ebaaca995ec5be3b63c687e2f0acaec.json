{"ast":null,"code":"const MapboxDraw = require('@mapbox/mapbox-gl-draw');\nconst createSupplementaryPoints = require(\"../utils/create_supplementary_points\");\nconst moveFeatures = require(\"../utils/move_features\");\nconst Constants = require(\"../utils/constants\");\nconst createSupplementaryPointsForCircle = require('../utils/create_supplementary_points_circle');\nconst SimpleSelectModeOverride = MapboxDraw.modes.simple_select;\nSimpleSelectModeOverride.dragMove = function (state, e) {\n  // Dragging when drag move is enabled\n  state.dragMoving = true;\n  e.originalEvent.stopPropagation();\n  const delta = {\n    lng: e.lngLat.lng - state.dragMoveLocation.lng,\n    lat: e.lngLat.lat - state.dragMoveLocation.lat\n  };\n  moveFeatures(this.getSelected(), delta);\n  this.getSelected().filter(feature => feature.properties.isCircle).map(circle => circle.properties.center).forEach(center => {\n    center[0] += delta.lng;\n    center[1] += delta.lat;\n  });\n  state.dragMoveLocation = e.lngLat;\n};\nSimpleSelectModeOverride.toDisplayFeatures = function (state, geojson, display) {\n  geojson.properties.active = this.isSelected(geojson.properties.id) ? Constants.activeStates.ACTIVE : Constants.activeStates.INACTIVE;\n  display(geojson);\n  this.fireActionable();\n  if (geojson.properties.active !== Constants.activeStates.ACTIVE || geojson.geometry.type === Constants.geojsonTypes.POINT) return;\n  const supplementaryPoints = geojson.properties.user_isCircle ? createSupplementaryPointsForCircle(geojson) : createSupplementaryPoints(geojson);\n  supplementaryPoints.forEach(display);\n};\nmodule.exports = SimpleSelectModeOverride;","map":null,"metadata":{},"sourceType":"script"}