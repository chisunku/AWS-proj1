{"ast":null,"code":"import { __awaiter as e } from \"tslib\";\nimport t from \"qrcode\";\nimport * as o from \"react\";\nimport { Logger as r } from \"aws-amplify\";\nimport { translate as a, getTotpCodeURL as i } from \"@aws-amplify/ui\";\nimport { Flex as n } from \"../../../primitives/Flex/Flex.js\";\nimport { Heading as l } from \"../../../primitives/Heading/Heading.js\";\nimport { useAuthenticator as m } from \"@aws-amplify/ui-react-core\";\nimport { useCustomComponents as s } from \"../hooks/useCustomComponents/index.js\";\nimport { useFormHandlers as c } from \"../hooks/useFormHandlers/useFormHandlers.js\";\nimport { ConfirmSignInFooter as d } from \"../shared/ConfirmSignInFooter.js\";\nimport { RemoteErrorMessage as p } from \"../shared/RemoteErrorMessage.js\";\nimport { FormFields as u } from \"../shared/FormFields.js\";\nimport { RouteContainer as f } from \"../RouteContainer/RouteContainer.js\";\nconst g = new r(\"SetupTOTP-logger\"),\n  E = _ref => {\n    let {\n      className: r,\n      variation: l\n    } = _ref;\n    var h;\n    const {\n        fields: v,\n        getTotpSecretCode: C,\n        isPending: y,\n        user: H\n      } = m(e => [e.isPending]),\n      {\n        handleChange: w,\n        handleSubmit: S\n      } = c(),\n      {\n        components: {\n          SetupTOTP: {\n            Header: F = E.Header,\n            Footer: j = E.Footer\n          }\n        }\n      } = s(),\n      [T, x] = o.useState(!0),\n      [P, V] = o.useState(),\n      [b, O] = o.useState(\"COPY\"),\n      [R, k] = o.useState(\"\"),\n      {\n        totpIssuer: L = \"AWSCognito\",\n        totpUsername: M = null == H ? void 0 : H.username\n      } = null !== (h = null == v ? void 0 : v.QR) && void 0 !== h ? h : {},\n      q = o.useCallback(() => e(void 0, void 0, void 0, function* () {\n        try {\n          const e = yield C();\n          k(e);\n          const o = i(L, M, e),\n            r = yield t.toDataURL(o);\n          V(r);\n        } catch (e) {\n          g.error(e);\n        } finally {\n          x(!1);\n        }\n      }), [C, L, M]);\n    o.useEffect(() => {\n      P || q();\n    }, [q, P]);\n    return o.createElement(f, {\n      className: r,\n      variation: l\n    }, o.createElement(\"form\", {\n      \"data-amplify-form\": \"\",\n      \"data-amplify-authenticator-setup-totp\": \"\",\n      method: \"post\",\n      onChange: w,\n      onSubmit: S\n    }, o.createElement(n, {\n      as: \"fieldset\",\n      direction: \"column\",\n      isDisabled: y\n    }, o.createElement(F, null), o.createElement(n, {\n      direction: \"column\"\n    }, T ? o.createElement(\"p\", null, a(\"Loading\"), \"â€¦\") : o.createElement(\"img\", {\n      \"data-amplify-qrcode\": !0,\n      src: P,\n      alt: \"qr code\",\n      width: \"228\",\n      height: \"228\"\n    }), o.createElement(n, {\n      \"data-amplify-copy\": !0\n    }, o.createElement(\"div\", null, R), o.createElement(n, {\n      \"data-amplify-copy-svg\": !0,\n      onClick: () => {\n        navigator.clipboard.writeText(R), O(a(\"COPIED\"));\n      }\n    }, o.createElement(\"div\", {\n      \"data-amplify-copy-tooltip\": !0\n    }, b), o.createElement(\"svg\", {\n      width: \"24\",\n      height: \"24\",\n      viewBox: \"0 0 24 24\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    }, o.createElement(\"path\", {\n      d: \"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"\n    })))), o.createElement(u, null), o.createElement(p, null)), o.createElement(d, null), o.createElement(j, null))));\n  };\nE.Header = function () {\n  return o.createElement(l, {\n    level: 3\n  }, a(\"Setup TOTP\"));\n}, E.Footer = function () {\n  return null;\n};\nexport { E as SetupTOTP };","map":null,"metadata":{},"sourceType":"module"}