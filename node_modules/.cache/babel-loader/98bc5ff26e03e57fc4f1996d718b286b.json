{"ast":null,"code":"import { COLOR_BLACK } from \"./constants\";\nimport { getGeofenceFeatureArray } from \"./geofenceUtils\";\nimport { isGeofenceArray, isPolygonArray } from \"./utils\";\nconst FILL_OPACITY = 0.3;\nconst BORDER_OPACITY = 0.5;\nconst BORDER_WIDTH = 4;\n/**\n * DrawPoints utility function for adding points to a map based on coordinate data or a FeatureCollection. Will add clustered points and styled markers by default with options for popups and other styles\n */\nexport function drawGeofences(sourceName, data, map) {\n  let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  var _a, _b, _c, _d, _e, _f, _g, _h;\n  if (!map || typeof map.addSource !== \"function\" || typeof map.addLayer !== \"function\") {\n    throw new Error(\"Please use a maplibre map\");\n  }\n  if (data.length > 0 && !isGeofenceArray(data) && !isPolygonArray(data)) {\n    throw new Error(\"Please pass in an array of Geofences or an array of Polygons\");\n  }\n  /*\n   * Data source for features\n   * Convert data passed in as coordinates into feature data\n   */\n  const sourceId = `${sourceName}`;\n  map.addSource(sourceId, {\n    type: \"geojson\",\n    data: getGeofenceFeatureArray(data),\n    generateId: true\n  });\n  const initialVisiblity = ((_a = options.visible) !== null && _a !== void 0 ? _a : true) ? \"visible\" : \"none\";\n  /*\n   * Draw ui layers for source data\n   */\n  const fillLayerId = `${sourceName}-fill-layer`;\n  map.addLayer({\n    id: fillLayerId,\n    type: \"fill\",\n    source: sourceId,\n    layout: {\n      visibility: initialVisiblity\n    },\n    paint: {\n      \"fill-color\": (_b = options.fillColor) !== null && _b !== void 0 ? _b : COLOR_BLACK,\n      \"fill-opacity\": (_c = options.fillOpacity) !== null && _c !== void 0 ? _c : FILL_OPACITY\n    }\n  });\n  // Add a black outline around the polygon.\n  const outlineLayerId = `${sourceName}-outline-layer`;\n  map.addLayer({\n    id: outlineLayerId,\n    type: \"line\",\n    source: sourceId,\n    layout: {\n      visibility: initialVisiblity\n    },\n    paint: {\n      \"line-color\": (_d = options.borderColor) !== null && _d !== void 0 ? _d : COLOR_BLACK,\n      \"line-opacity\": (_e = options.borderOpacity) !== null && _e !== void 0 ? _e : BORDER_OPACITY,\n      \"line-width\": (_f = options.borderWidth) !== null && _f !== void 0 ? _f : BORDER_WIDTH,\n      \"line-offset\": (_g = options.borderOffset) !== null && _g !== void 0 ? _g : ((_h = options.borderWidth) !== null && _h !== void 0 ? _h : BORDER_WIDTH) / 2 * -1\n    }\n  });\n  // utility function for setting layer visibility to none\n  const hide = () => {\n    map.setLayoutProperty(fillLayerId, \"visibility\", \"none\");\n    map.setLayoutProperty(outlineLayerId, \"visibility\", \"none\");\n  };\n  // utility function for setting layer visibility to visible\n  const show = () => {\n    map.setLayoutProperty(fillLayerId, \"visibility\", \"visible\");\n    map.setLayoutProperty(outlineLayerId, \"visibility\", \"visible\");\n  };\n  // utility function for checking layer visibility\n  const isVisible = () => {\n    const visibility = map.getLayoutProperty(fillLayerId, \"visibility\");\n    return visibility === \"visible\";\n  };\n  // utility function for setting layer visibility to visible\n  const setData = data => {\n    map.getSource(sourceId).setData(data);\n  };\n  return {\n    sourceId,\n    outlineLayerId,\n    fillLayerId,\n    show,\n    hide,\n    isVisible,\n    setData\n  };\n}","map":null,"metadata":{},"sourceType":"module"}